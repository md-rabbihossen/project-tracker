export const quotes = [
  {
    text: "The best way to predict the future is to create it.",
    author: "Peter Drucker",
  },
  {
    text: "Don't watch the clock; do what it does. Keep going.",
    author: "Sam Levenson",
  },
  {
    text: "The secret of getting ahead is getting started.",
    author: "Mark Twain",
  },
  {
    text: "Your time is limited, so don't waste it living someone else's life.",
    author: "Steve Jobs",
  },
  {
    text: "The key is not to prioritize what's on your schedule, but to schedule your priorities.",
    author: "Stephen Covey",
  },
  { text: "Verily, with hardship, there is relief.", author: "Quran 94:6" },
  {
    text: "The seeking of knowledge is obligatory for every Muslim.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Life is what happens when you're busy making other plans.",
    author: "John Lennon",
  },
  {
    text: "The life of man is of no greater duration than the breath of his nostrils.",
    author: "Plato",
  },
  {
    text: "And whoever turns away from My remembrance – indeed, he will have a depressed life.",
    author: "Quran 20:124",
  },
  {
    text: "The best among you are those who have the best manners and character.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Do not let your difficulties fill you with anxiety; it is better to trust in Allah.",
    author: "Imam Ali (AS)",
  },
  {
    text: "Success is not final, failure is not fatal: it is the courage to continue that counts.",
    author: "Winston Churchill",
  },
  { text: "The purpose of our lives is to be happy.", author: "Dalai Lama" },
  {
    text: "Indeed, the life of this world is nothing but a passing enjoyment.",
    author: "Quran 3:185",
  },
  {
    text: "Your goal in life should be to please Allah, for that is the ultimate success.",
    author: "Ibn Taymiyyah",
  },
  {
    text: "The future belongs to those who believe in the beauty of their dreams.",
    author: "Eleanor Roosevelt",
  },
  {
    text: "The life of the hereafter is better for you than this worldly life.",
    author: "Quran 93:4",
  },
  {
    text: "You don't have to be great to start, but you have to start to be great.",
    author: "Zig Ziglar",
  },
  {
    text: "The best of people are those who are most beneficial to others.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Time is the most valuable thing a man can spend.",
    author: "Theophrastus",
  },
  {
    text: "And We have certainly made the Quran easy for remembrance, so is there any who will remember?",
    author: "Quran 54:17",
  },
  {
    text: "Do not be a slave to others when Allah has created you free.",
    author: "Imam Ali (AS)",
  },
  {
    text: "The only limit to our realization of tomorrow will be our doubts of today.",
    author: "Franklin D. Roosevelt",
  },
  {
    text: "The best preparation for tomorrow is doing your best today.",
    author: "H. Jackson Brown Jr.",
  },
  {
    text: "Verily, Allah does not change the condition of a people until they change what is in themselves.",
    author: "Quran 13:11",
  },
  { text: "Patience is a pillar of faith.", author: "Umar ibn al-Khattab" },
  {
    text: "The greatest glory in living lies not in never falling, but in rising every time we fall.",
    author: "Nelson Mandela",
  },
  {
    text: "The life of this world is but a play and amusement; the home of the hereafter, that is the true life.",
    author: "Quran 29:64",
  },
  {
    text: "Do not let the behavior of others destroy your inner peace.",
    author: "Dalai Lama",
  },
  {
    text: "Whoever is grateful does so to the profit of his own soul.",
    author: "Quran 31:12",
  },
  {
    text: "The best of you are those who learn the Quran and teach it.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Time is more valuable than money. You can get more money, but you cannot get more time.",
    author: "Jim Rohn",
  },
  {
    text: "Strive for excellence, not perfection.",
    author: "H. Jackson Brown Jr.",
  },
  {
    text: "The world is but a moment, so make it a moment of obedience.",
    author: "Hasan al-Basri",
  },
  {
    text: "You must be the change you wish to see in the world.",
    author: "Mahatma Gandhi",
  },
  {
    text: "Indeed, Allah loves those who are constantly repentant and loves those who purify themselves.",
    author: "Quran 2:222",
  },
  {
    text: "The strongest among you is the one who controls his anger.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Life is not measured by the number of breaths we take, but by the moments that take our breath away.",
    author: "Maya Angelou",
  },
  {
    text: "The greatest wealth is to live content with little.",
    author: "Plato",
  },
  {
    text: "Do good and good will come to you.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The only way to do great work is to love what you do.",
    author: "Steve Jobs",
  },
  {
    text: "And whoever fears Allah – He will make for him a way out.",
    author: "Quran 65:2",
  },
  { text: "The best revenge is to improve yourself.", author: "Imam Ali (AS)" },
  {
    text: "Don't let yesterday take up too much of today.",
    author: "Will Rogers",
  },
  {
    text: "Every soul will taste death, and you will only be given your compensation on the Day of Resurrection.",
    author: "Quran 3:185",
  },
  {
    text: "The greatest Jihad is to battle your own soul, to fight the evil within yourself.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The future depends on what you do today.",
    author: "Mahatma Gandhi",
  },
  {
    text: "Do not grieve over what has passed, but work for what is to come.",
    author: "Umar ibn al-Khattab",
  },
  {
    text: "The purpose of life is not to be happy. It is to be useful, to be honorable, to be compassionate.",
    author: "Ralph Waldo Emerson",
  },
  {
    text: "And the life of this world is nothing but play and amusement.",
    author: "Quran 6:32",
  },
  {
    text: "The best way to find yourself is to lose yourself in the service of others.",
    author: "Mahatma Gandhi",
  },
  {
    text: "Knowledge makes a man unfit to be a slave.",
    author: "Frederick Douglass",
  },
  {
    text: "The best of deeds is the one that is consistent, even if it is small.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Life is either a daring adventure or nothing at all.",
    author: "Helen Keller",
  },
  { text: "And seek help through patience and prayer.", author: "Quran 2:45" },
  {
    text: "The most complete gift of God is a life based on knowledge.",
    author: "Imam Ali (AS)",
  },
  {
    text: "Don't judge each day by the harvest you reap but by the seeds that you plant.",
    author: "Robert Louis Stevenson",
  },
  {
    text: "The life of this world is like a passing shadow.",
    author: "Ibn al-Qayyim",
  },
  {
    text: "Success is to be measured not so much by the position that one has reached in life as by the obstacles which he has overcome.",
    author: "Booker T. Washington",
  },
  {
    text: "Indeed, the righteous will be in pleasure, and the wicked will be in Hellfire.",
    author: "Quran 82:13-14",
  },
  {
    text: "The best of you are those who are best to their families.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "You miss 100% of the shots you don't take.",
    author: "Wayne Gretzky",
  },
  {
    text: "The life of this world is short, so turn to Allah before you return to Allah.",
    author: "Ibn al-Qayyim",
  },
  {
    text: "The greatest of richness is the richness of the soul.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "In the middle of every difficulty lies opportunity.",
    author: "Albert Einstein",
  },
  {
    text: "And whoever is mindful of Allah, He will make for him a way out.",
    author: "Quran 65:2",
  },
  {
    text: "The only impossible journey is the one you never begin.",
    author: "Tony Robbins",
  },
  {
    text: "The best way to serve Allah is to serve His creation.",
    author: "Imam Ali (AS)",
  },
  {
    text: "Life is a journey, not a destination.",
    author: "Ralph Waldo Emerson",
  },
  {
    text: "Do not let the dunya (worldly life) distract you from the remembrance of Allah.",
    author: "Hasan al-Basri",
  },
  {
    text: "The successful warrior is the average man, with laser-like focus.",
    author: "Bruce Lee",
  },
  { text: "Indeed, Allah is with the patient.", author: "Quran 2:153" },
  {
    text: "The best of people are those who repent sincerely.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The greatest mistake you can make in life is to be continually fearing you will make one.",
    author: "Elbert Hubbard",
  },
  {
    text: "The life of this world is but a provision, and the hereafter is the true abode.",
    author: "Quran 40:39",
  },
  {
    text: "The best of you are those who are best to their wives.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Don't wait for the perfect moment, take the moment and make it perfect.",
    author: "Zig Ziglar",
  },
  {
    text: "The heart that is free from doubt is the heart that is at peace.",
    author: "Imam Ali (AS)",
  },
  {
    text: "And We have made some of you as a trial for others; will you have patience?",
    author: "Quran 25:20",
  },
  {
    text: "The greatest achievement is to surpass yourself.",
    author: "Denis Waitley",
  },
  {
    text: "The best charity is that given in secret.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Life is not about finding yourself. Life is about creating yourself.",
    author: "George Bernard Shaw",
  },
  {
    text: "The dunya is a prison for the believer and a paradise for the disbeliever.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The only way to achieve the impossible is to believe it is possible.",
    author: "Charles Kingsleigh",
  },
  {
    text: "Indeed, the mercy of Allah is near to the doers of good.",
    author: "Quran 7:56",
  },
  {
    text: "The best knowledge is that which benefits you in the hereafter.",
    author: "Ibn Mas'ud",
  },
  {
    text: "You can't go back and change the beginning, but you can start where you are and change the ending.",
    author: "C.S. Lewis",
  },
  {
    text: "The life of this world is fleeting; seek the eternal life.",
    author: "Ibn al-Qayyim",
  },
  {
    text: "The best way to get started is to quit talking and begin doing.",
    author: "Walt Disney",
  },
  {
    text: "The best of you are those who are most humble.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Do not let the dunya be your greatest concern.",
    author: "Umar ibn al-Khattab",
  },
  {
    text: "The greatest discovery of all time is that a person can change his future by merely changing his attitude.",
    author: "Oprah Winfrey",
  },
  {
    text: "Indeed, Allah does not wrong the people at all, but it is the people who are wronging themselves.",
    author: "Quran 10:44",
  },
  {
    text: "The best of actions is sincerity in deeds.",
    author: "Imam Ali (AS)",
  },
  {
    text: "The only person you are destined to become is the person you decide to be.",
    author: "Ralph Waldo Emerson",
  },
  {
    text: "The life of this world is but a test; the true life is in the hereafter.",
    author: "Quran 29:64",
  },
  {
    text: "The best of you are those who control their tongues.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "You are never too old to set another goal or to dream a new dream.",
    author: "C.S. Lewis",
  },
  {
    text: "The dunya is a bridge; cross it, but do not build upon it.",
    author: "Hasan al-Basri",
  },
  {
    text: "The best way to cheer yourself up is to try to cheer somebody else up.",
    author: "Mark Twain",
  },
  {
    text: "Indeed, Allah is with those who fear Him and those who are doers of good.",
    author: "Quran 16:128",
  },
  {
    text: "The best of wealth is that which is spent in the way of Allah.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The greatest pleasure in life is doing what people say you cannot do.",
    author: "Walter Bagehot",
  },
  {
    text: "The heart is like a garden; plant good deeds and it will flourish.",
    author: "Imam Ali (AS)",
  },
  {
    text: "The life of this world is like a dream; the hereafter is the reality.",
    author: "Ibn al-Qayyim",
  },
  {
    text: "The best of you are those who are best in character.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The only limit to our realization of tomorrow will be our doubts of today.",
    author: "Franklin D. Roosevelt",
  },
  { text: "Indeed, the promise of Allah is truth.", author: "Quran 30:60" },
  {
    text: "The best way to achieve success is to help others achieve it.",
    author: "Zig Ziglar",
  },
  {
    text: "The dunya is not your home; your home is the hereafter.",
    author: "Hasan al-Basri",
  },
  {
    text: "The greatest wealth is contentment of the heart.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Life is a series of natural and spontaneous changes. Don't resist them; that only creates sorrow.",
    author: "Lao Tzu",
  },
  {
    text: "And whoever puts his trust in Allah, He will suffice him.",
    author: "Quran 65:3",
  },
  {
    text: "The best of you are those who are most beneficial to mankind.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The only way to make sense out of change is to plunge into it, move with it, and enjoy the dance.",
    author: "Alan Watts",
  },
  {
    text: "The life of this world is but a fleeting shadow.",
    author: "Ibn al-Qayyim",
  },
  {
    text: "The best of deeds are those done consistently, even if they are small.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The greatest thing in the world is to know how to belong to oneself.",
    author: "Michel de Montaigne",
  },
  { text: "Indeed, Allah is with the patient.", author: "Quran 2:153" },
  {
    text: "The best of you are those who are best to their parents.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The only real mistake is the one from which we learn nothing.",
    author: "Henry Ford",
  },
  {
    text: "The dunya is a test; strive for the hereafter.",
    author: "Hasan al-Basri",
  },
  {
    text: "The best of people are those who are most humble.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The greatest victory is that which requires no battle.",
    author: "Sun Tzu",
  },
  {
    text: "Indeed, the mercy of Allah is near to those who do good.",
    author: "Quran 7:56",
  },
  {
    text: "The best way to achieve your goals is to help others achieve theirs.",
    author: "Zig Ziglar",
  },
  {
    text: "The life of this world is but a provision, and the hereafter is the true abode.",
    author: "Quran 40:39",
  },
  {
    text: "The best of you are those who are best in character.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The only way to achieve the impossible is to believe it is possible.",
    author: "Charles Kingsleigh",
  },
  {
    text: "The heart is like a garden; plant good deeds and it will flourish.",
    author: "Imam Ali (AS)",
  },
  {
    text: "The life of this world is like a dream; the hereafter is the reality.",
    author: "Ibn al-Qayyim",
  },
  {
    text: "The best of you are those who are best in character.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The only limit to our realization of tomorrow will be our doubts of today.",
    author: "Franklin D. Roosevelt",
  },
  { text: "Indeed, the promise of Allah is truth.", author: "Quran 30:60" },
  {
    text: "The best way to achieve success is to help others achieve it.",
    author: "Zig Ziglar",
  },
  {
    text: "The dunya is not your home; your home is the hereafter.",
    author: "Hasan al-Basri",
  },
  {
    text: "The greatest wealth is contentment of the heart.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "Life is a series of natural and spontaneous changes. Don't resist them; that only creates sorrow.",
    author: "Lao Tzu",
  },
  {
    text: "And whoever puts his trust in Allah, He will suffice him.",
    author: "Quran 65:3",
  },
  {
    text: "The best of you are those who are most beneficial to mankind.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The only way to make sense out of change is to plunge into it, move with it, and enjoy the dance.",
    author: "Alan Watts",
  },
  {
    text: "The life of this world is but a fleeting shadow.",
    author: "Ibn al-Qayyim",
  },
  {
    text: "The best of deeds are those done consistently, even if they are small.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The greatest thing in the world is to know how to belong to oneself.",
    author: "Michel de Montaigne",
  },
  { text: "Indeed, Allah is with the patient.", author: "Quran 2:153" },
  {
    text: "The best of you are those who are best to their parents.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The only real mistake is the one from which we learn nothing.",
    author: "Henry Ford",
  },
  {
    text: "The dunya is a test; strive for the hereafter.",
    author: "Hasan al-Basri",
  },
  {
    text: "The best of people are those who are most humble.",
    author: "Prophet Muhammad (ﷺ)",
  },
  {
    text: "The greatest victory is that which requires no battle.",
    author: "Sun Tzu",
  },
];

export function getInitialBooks() {
  try {
    const books = localStorage.getItem("currentBooks");
    if (books) return JSON.parse(books);
  } catch (e) {
    console.error("Error loading books from localStorage:", e);
  }

  // Return empty array - no demo data
  return [];
}

export function saveBooksToStorage(books) {
  try {
    localStorage.setItem("currentBooks", JSON.stringify(books));
  } catch (e) {
    console.error("Error saving books to localStorage:", e);
  }
}

export function formatProgress(topic) {
  if (topic.type === "book") {
    const completed = topic.completedPages || 0;
    const total = topic.totalPages || 0;
    return `${completed} of ${total} Pages`;
  } else if (topic.type === "day") {
    const completed = topic.completedDays || 0;
    const total = topic.totalDays || 0;
    return `${completed} of ${total} Days Completed`;
  } else if (topic.type === "simple") {
    return topic.completed ? "✓ Completed" : "";
  }
  const minutes = topic.completedMinutes || 0;
  const totalMinutes = topic.totalMinutes || 0;
  const hours = Math.floor(minutes / 60);
  const mins = Math.round(minutes % 60);

  const totalHours = Math.floor(totalMinutes / 60);
  const totalMins = Math.round(totalMinutes % 60);

  return `${hours}h ${mins}m / ${totalHours}h ${totalMins}m`;
}

export function formatDailyMinutes(totalMinutes) {
  if (isNaN(totalMinutes) || totalMinutes <= 0) return "0 M";
  const hours = Math.floor(totalMinutes / 60);
  const mins = Math.round(totalMinutes % 60);

  let result = "";
  if (hours > 0) {
    result += `${hours} H`;
  }
  if (mins > 0) {
    if (result) result += " ";
    result += `${mins} M`;
  }
  return result || "0 M";
}

export function getDateString(date = new Date()) {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, "0");
  const day = String(date.getDate()).padStart(2, "0");
  return `${year}-${month}-${day}`;
}

export function getTodayProgress() {
  const today = getDateString();
  const stored = localStorage.getItem(`dailyProgress_${today}`);
  if (stored) {
    return JSON.parse(stored);
  }
  return { hoursCompleted: 0, pagesRead: 0 };
}

export function saveTodayProgress(hoursCompleted, pagesRead) {
  const today = getDateString();
  const progress = { hoursCompleted, pagesRead };
  localStorage.setItem(`dailyProgress_${today}`, JSON.stringify(progress));

  // Trigger immediate sync to Firebase if user is authenticated
  window.dispatchEvent(
    new CustomEvent("dailyProgressUpdate", {
      detail: { date: today, progress },
    })
  );
}

export function addToTodayProgress(type, amount) {
  const current = getTodayProgress();
  if (type === "hours") {
    current.hoursCompleted += amount;
  } else if (type === "pages") {
    current.pagesRead += amount;
  }
  saveTodayProgress(current.hoursCompleted, current.pagesRead);
}

export function shouldShowTaskToday(task) {
  // If task is completed and is a one-time task, check if it was completed today
  if (task.completed && (!task.repeatType || task.repeatType === "none")) {
    // If it has a completedAt date, only show if completed today
    if (task.completedAt) {
      const completedDate = new Date(task.completedAt).toDateString();
      const today = new Date().toDateString();
      // If completed on a previous day, don't show it
      if (completedDate !== today) {
        return false;
      }
    }
    // If no completedAt date but it's completed and one-time, hide it (safety measure)
    else {
      return false;
    }
  }

  if (!task.repeatType || task.repeatType === "none") {
    return true;
  }

  if (task.repeatType === "daily") {
    return true;
  }

  const today = new Date().getDay();

  if (task.repeatType === "weekly") {
    return (
      task.selectedDays &&
      task.selectedDays.length > 0 &&
      task.selectedDays[0] === today
    );
  }

  if (task.repeatType === "custom") {
    return task.selectedDays && task.selectedDays.includes(today);
  }

  return true;
}

export const calculateWeekProgress = (week) => {
  if (!week.topics || week.topics.length === 0) return 0;
  const totalPercentage = week.topics.reduce((sum, topic) => {
    if (topic.type === "book") {
      const completed = topic.completedPages || 0;
      const total = topic.totalPages || 1;
      return sum + (completed / total) * 100;
    } else if (topic.type === "day") {
      const completed = topic.completedDays || 0;
      const total = topic.totalDays || 1;
      return sum + (completed / total) * 100;
    } else if (topic.type === "simple") {
      return sum + (topic.completed ? 100 : 0);
    }
    const completed = topic.completedMinutes || 0;
    const total = topic.totalMinutes || 1;
    return sum + (completed / total) * 100;
  }, 0);
  const progress = totalPercentage / week.topics.length;
  return progress >= 99.999 ? 100 : progress;
};

export function getTodayString() {
  const days = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"];
  const now = new Date();
  return `${days[now.getDay()]} ${now.getDate()}`;
}

export function getWeekInfo(weekNumber, overallStartDate) {
  const months = [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec",
  ];
  const baseDate = new Date(overallStartDate + "T00:00:00");

  const start = new Date(baseDate);
  start.setDate(start.getDate() + (weekNumber - 1) * 7);

  const end = new Date(start);
  end.setDate(start.getDate() + 6);

  const rangeString = `${start.getDate()} ${
    months[start.getMonth()]
  } - ${end.getDate()} ${months[end.getMonth()]}`;

  const today = new Date();
  today.setHours(0, 0, 0, 0);
  const endOfDay = new Date(end);
  endOfDay.setHours(23, 59, 59, 999);

  let remainingDays = Math.ceil((endOfDay - today) / (1000 * 60 * 60 * 24));
  let remainingString;

  if (remainingDays < 0) remainingString = "Finished";
  else if (remainingDays === 0) remainingString = "Ends Today";
  else if (remainingDays === 1) remainingString = "1 day left";
  else remainingString = `${remainingDays} days left`;

  return { rangeString, remainingString };
}

export const getCurrentWeekNumber = (startDateString, totalWeeks) => {
  if (!startDateString) return 1;
  const start = new Date(startDateString + "T00:00:00");
  const today = new Date();

  if (today < start) return 1;

  const diffTime = today - start;
  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
  let currentWeek = Math.floor(diffDays / 7) + 1;

  currentWeek = Math.max(1, Math.min(currentWeek, totalWeeks));

  return currentWeek;
};
